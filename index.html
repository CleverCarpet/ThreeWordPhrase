<!doctype html>
<html lang="en" class="h-100" data-bs-theme="dark">

<head>
    <meta charset="utf-8">
    <meta name="description" content="Generate a phrase with three random words.">
    <meta name="keywords" content="Random, Phrase, Generator, Words, Word">
    <meta name="author" content="CleverCarpet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Three Word Phrase</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
        integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
        crossorigin="anonymous"></script>
</head>

<style>
    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
    }

    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }

    .b-example-divider {
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
    }

    .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
    }

    .bi {
        vertical-align: -.125em;
        fill: currentColor;
    }

    .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
    }

    .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
    }

    /*
 * Globals
 */


    /* Custom default button */
    .btn-light,
    .btn-light:hover,
    .btn-light:focus {
        color: #333;
        text-shadow: none;
        /* Prevent inheritance from `body` */
    }


    /*
 * Base structure
 */

    body {
        text-shadow: 0 .05rem .1rem rgba(0, 0, 0, .5);
        box-shadow: inset 0 0 5rem rgba(0, 0, 0, .5);
    }

    .cover-container {
        max-width: 42em;
    }


    /*
 * Header
 */

    .nav-masthead .nav-link {
        color: rgba(255, 255, 255, .5);
        border-bottom: .25rem solid transparent;
    }

    .nav-masthead .nav-link:hover,
    .nav-masthead .nav-link:focus {
        border-bottom-color: rgba(255, 255, 255, .25);
    }

    .nav-masthead .nav-link+.nav-link {
        margin-left: 1rem;
    }

    .nav-masthead .active {
        color: #fff;
        border-bottom-color: #fff;
    }

    .nav-link {
        cursor: pointer;
    }
</style>

<body class="d-flex h-100 text-center text-bg-dark" data-bs-theme="dark">

    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
        <header class="mb-auto">
            <div>
                <h3 class="float-md-start mb-0">
                    <a href="/" style="display: inline-flex;" class="align-items-center text-decoration-none">
                        <img class="bi me-2" width="40" height="40" src="logo.png" alt="Logo">
                        <span style="margin-left: 4px;color: white;" class="fs-4 nav-link">TWP</span>
                    </a>
                </h3>
                <nav class="nav nav-masthead justify-content-center float-md-end">
                    <a class="nav-link fw-bold py-1 px-0 active" aria-current="page" href="#">Home</a>
                    <a class="nav-link fw-bold py-1 px-0" id="aboutButton">About</a>
                    <a class="nav-link fw-bold py-1 px-0" href="https://github.com/CleverCarpet">Developer</a>
                </nav>
            </div>
        </header>

        <main class="px-3">
            <h1>Three Word Phrase</h1>
            <p class="lead">Need a random phrase? Look no futher than the TWP Generator.</p>
            <div id="errorbox"></div>
            <p class="lead">
            <div class="mb-3">
                <label for="wordBox" class="form-label">Your Random Phrase</label>
                <div class="input-group mb-3" id="wordbox" aria-describedby="emailHelp">
                    <input type="text" class="form-control" id="wordOutput" aria-describedby="copyButton" readonly>
                    <button class="btn btn-secondary" type="button" id="copyButton" data-bs-toggle="copyToolTip"
                        data-bs-placement="top" data-bs-title="Copied">Copy</button>
                </div>
                <div id="generatorHelp" class="form-text" style="display: none;">This is taking longer than expected.
                    Try refreshing the page.</div>
            </div>
            <div class="input-group mb-3" style="justify-content: center;">
                <button type="submit" class="btn btn-primary" id="generateButton">Generate Phrase</button>
                <button id="optionsButton" type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split"
                    aria-expanded="false">
                    <span class="visually-hidden">Toggle Options</span>
                </button>
            </div>
            </p>
        </main>

        <div class="modal fade" id="optionsModal" tabindex="-1" aria-labelledby="aboutModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="aboutModalLabel">Generation Options</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="exactlyPr">Exactly</span>
                            <input type="number" class="form-control numparam param"
                                placeholder="How Many Strings to Generate" value="3">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="minlengthPr">Min Length</span>
                            <input type="number" class="form-control numparam param"
                                placeholder="Minimum Length of Each Word" value="2">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="maxlengthPr">Max Length</span>
                            <input type="number" class="form-control numparam param"
                                placeholder="Maximum Length of Each Word" value="10">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="wordsPr">Words</span>
                            <input type="number" class="form-control numparam param"
                                placeholder="How Many Words Per Each String" value="1">
                        </div>
                        <div class="form-floating">
                            <select class="form-select" id="formatPr"
                                aria-label="Floating label select example selectparam param">
                                <option selected value="beginning">Beginning</option>
                                <option value="complete">Complete</option>
                                <option value="none">None</option>
                            </select>
                            <label for="floatingSelect">Text Formatting</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="aboutModal" tabindex="-1" aria-labelledby="aboutModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="aboutModalLabel">About</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <h4>Why?</h4>
                        <p>Have you ever been stumped when trying to come up with an idea for a username or title for
                            something? Well the TWP Generator fixes that by generating a random phrase for you to use.
                            Also, because I can.</p>
                        <h4>How?</h4>
                        <p>TWP Generator was made using HTML, CSS, Vannila Javascript, and <a
                                href="https://nodejs.org">Node.JS</a> The backend is hosted using a <a
                                href="https://repl.it">Repl.it</a> server at the moment and the frontend is hosted on
                            the <a href="https://carbondev.cf">Carbon Dev</a> Domain using <a
                                href="https://netlify.com">Netfliy</a>.</p>
                        <h4>Who?</h4>
                        <p>This generator was made by <strong><a
                                    href="https://github.com/CleverCarpet">CleverCarpet</a></strong> himself.</p>
                        <h4>Credits</h4>
                        <a href="https://github.com/sindresorhus/random-word">Random Word Library</a>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const copyToolTip = new bootstrap.Tooltip(document.getElementById('copyButton'), { 'trigger': 'manual focus' })
            const aboutModal = new bootstrap.Modal(document.getElementById('aboutModal'))
            const optionsModal = new bootstrap.Modal(document.getElementById('optionsModal'))

            let exactlyPr = 3
            let wordsPr = 1
            let minlengthPr = 2
            let maxlengthPr = 20
            let formatPr = 'Beginning'
            let paramelements = document.getElementsByClassName('param')
            let paramselelements = document.getElementsByClassName('selectparam')

            for (var i = 0; i < paramelements.length; i++) {
                paramelements[i].addEventListener('input', function (e) {
                    console.log(this.id)
                    console.log(e.id)
                    if (this.id = 'exactlyPr') {
                        exactlyPr = this.value
                    } else if (this.id = 'wordsPr') {
                        wordsPr = this.value
                    } else if (this.id = 'maxlengthPr') {
                        maxlengthPr = this.value
                    } else if (this.id = 'minlengthPr') {
                        minlengthPr = this.value
                    }
                })
            }

            for (var i = 0; i < paramselelements.length; i++) {
                console.log(this.id)
                console.log(e.id)
                paramselelements[i].addEventListener('change', function (e) {
                    if (this.id = 'formatPr') {
                        formatPr = this.value
                    }
                })
            }

            let isFetching = false
            let options = {}

            async function fetchWord() {
                let genparams = 'exactlyPr=' + exactlyPr + 'wordsPr=' + wordsPr + 'minlengthPr=' + minlengthPr + 'maxlengthPr=' + maxlengthPr + 'formatPr=' + formatPr
                let get = await fetch('https://RandomWord.clevercarpet.repl.co/api/generate?' + genparams, { timeout: 5000 }).catch(error => {
                    document.getElementById('errorBox').innerHTML = `<div class="alert alert-danger" role="alert"> There seems to be an issue fetching words from the dictionary. Try to <button type="button" class="btn btn-link" onclick="window.location.reload()">Refresh</button> </div>`
                });
                let res = await get.json()
                return res
            }

            function testConnection() {
                if (isFetching == true) {
                    document.getElementById('generatorHelp').style.display = 'block'
                }
            }

            function runConnection() {
                setTimeout(testConnection, 5000)
            }

            document.getElementById('generateButton').onclick = async function () {
                isFetching = true
                runConnection()
                document.getElementById('generateButton').classList.add('placeholder')
                document.getElementById('generateButton').disabled = true
                document.getElementById('generateButton').innerText = "Fetching Phrase"
                let wordsjson = await fetchWord()
                let words = wordsjson.join(' ')
                document.getElementById('generateButton').disabled = false
                document.getElementById('generateButton').innerText = "Generate Phrase"
                document.getElementById('generateButton').classList.remove('placeholder')
                document.getElementById('wordOutput').value = words
                isFetching = false
            }

            document.getElementById('copyButton').onclick = function () {
                navigator.clipboard.writeText(document.getElementById('wordOutput').value)
                copyToolTip.show()
            }

            document.getElementById('aboutButton').onclick = function () {
                aboutModal.show()
            }

            document.getElementById('optionsButton').onclick = function () {
                optionsModal.show()
            }
        </script>

        <footer class="mt-auto text-white-50">
            <p>TWP was made with ❤️ by <a href="https://github.com/CleverCarpet" class="text-white">CleverCarpet</a>.
            </p>
        </footer>
    </div>

</body>

</html>